---
import { siteConfig } from '@/data/siteConfig';
import SectionHeader from '@/components/ui/SectionHeader.astro';

type Option = {
  title: string;
  description: string;
  href: string;
  tone: 'primary' | 'secondary';
  icon: 'walkthrough' | 'checklist' | 'phone';
};

type Props = {
  id?: string;
  heading?: string;
  description?: string;
};

const {
  id,
  heading = 'Options to get started',
  description = 'Choose the path that fits your timeline. Weâ€™ll confirm scope on a walkthrough, then send a clear, written quote.',
} = Astro.props;

const base = import.meta.env.BASE_URL;
const href = (path: string) => `${base}${path.replace(/^\/+/, '')}`;
const telHref = `tel:${siteConfig.contact.phoneE164}`;

const options: Option[] = [
  {
    title: 'Request a walkthrough',
    description: 'Tell us your space + schedule. We reply within 1 business day.',
    href: href('contact/'),
    tone: 'primary',
    icon: 'walkthrough',
  },
  {
    title: 'Preview the checklist',
    description: 'Use a printable checklist to set expectations and compare vendors.',
    href: href('checklist/'),
    tone: 'secondary',
    icon: 'checklist',
  },
  {
    title: 'Call / text us',
    description: `Fast questions, quick answers: ${siteConfig.contact.phoneDisplay}.`,
    href: telHref,
    tone: 'secondary',
    icon: 'phone',
  },
];
---

<section id={id} class="section section-creative scroll-mt-20">
  <div class="container-page">
    <SectionHeader eyebrow="Start here" heading={heading} description={description} />

    <div class="mt-8 grid gap-5 md:grid-cols-3">
      {
        options.map((opt) => (
          <a
            href={opt.href}
            class:list={[
              'glass-panel group relative overflow-hidden p-6 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-[rgb(var(--color-bg))]',
              opt.tone === 'primary' ? 'ring-1 ring-brand-500/25' : '',
            ]}
            aria-label={opt.title}
          >
            <div
              aria-hidden="true"
              class="from-brand-200/14 pointer-events-none absolute inset-0 bg-gradient-to-br via-transparent to-brand-300/10 opacity-70 transition-opacity duration-300 group-hover:opacity-100"
            />
            <div class="relative">
              <div class="flex items-start justify-between gap-4">
                <div>
                  <h3 class="text-strong text-lg font-bold">{opt.title}</h3>
                  <p class="text-muted mt-2 text-sm leading-relaxed">{opt.description}</p>
                </div>

                <span
                  class:list={[
                    'inline-flex h-11 w-11 flex-none items-center justify-center rounded-2xl shadow-md ring-1 ring-white/10',
                    opt.tone === 'primary'
                      ? 'bg-brand-600 text-white shadow-brand-900/15'
                      : 'bg-brand-900 text-white shadow-brand-900/15',
                  ]}
                  aria-hidden="true"
                >
                  {opt.icon === 'walkthrough' && (
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="h-5 w-5"
                    >
                      <path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z" />
                      <path d="M8 9h8" />
                      <path d="M8 13h6" />
                    </svg>
                  )}
                  {opt.icon === 'checklist' && (
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="h-5 w-5"
                    >
                      <path d="M9 11l3 3L22 4" />
                      <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" />
                      <path d="M7 12h6" />
                      <path d="M7 16h10" />
                    </svg>
                  )}
                  {opt.icon === 'phone' && (
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="h-5 w-5"
                    >
                      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.86 19.86 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.86 19.86 0 0 1 2.08 4.18 2 2 0 0 1 4.06 2h3a2 2 0 0 1 2 1.72 12.44 12.44 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.44 12.44 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" />
                    </svg>
                  )}
                </span>
              </div>

              <div class="mt-5 flex items-center gap-2 text-sm font-semibold">
                <span
                  class:list={[
                    opt.tone === 'primary'
                      ? 'text-brand-700 dark:text-brand-300'
                      : 'text-brand-700/90 dark:text-brand-300/90',
                  ]}
                >
                  Choose this option
                </span>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="h-4 w-4 transition-transform duration-300 group-hover:translate-x-1"
                  aria-hidden="true"
                >
                  <path d="M5 12h14" />
                  <path d="M13 6l6 6-6 6" />
                </svg>
              </div>
            </div>
          </a>
        ))
      }
    </div>
  </div>
</section>
