---
import { siteConfig } from '@/data/siteConfig';
import WaveDivider from '@/components/WaveDivider.astro';
import SectionHeader from '@/components/ui/SectionHeader.astro';

const {
  id,
  heading = 'What clients say',
  description,
  showWave = true,
  waveTone = 'surface',
} = Astro.props;

const safeWaveTone =
  waveTone === 'surface' || waveTone === 'surface-muted' || waveTone === 'bg'
    ? waveTone
    : 'surface';
---

<section id={id} class="section section-muted section-creative scroll-mt-20 pb-0">
  <div class="container-page relative">
    <SectionHeader
      eyebrow="Testimonials"
      heading={heading}
      description={description ??
        'Real feedback is the best marketing. Swap these placeholders with your own testimonials.'}
    />

    <div aria-hidden="true" class="pointer-events-none absolute inset-x-0 -top-12 -z-10">
      <div class="mx-auto h-72 w-[min(72rem,95vw)] rounded-full bg-brand-500/10 blur-3xl"></div>
    </div>

    <div class="mt-10 grid gap-5 md:grid-cols-3">
      {
        siteConfig.testimonials.map((t) => (
          <figure class="glass-panel relative overflow-hidden p-6">
            <div
              aria-hidden="true"
              class="from-brand-200/14 pointer-events-none absolute inset-0 bg-gradient-to-br via-transparent to-brand-300/10"
            />
            <div class="relative">
              <div class="flex items-center gap-2" aria-label="Five-star review">
                <span class="text-amber-500" aria-hidden="true">
                  ★★★★★
                </span>
                <span class="text-subtle text-xs">Verified</span>
              </div>
              <blockquote class="text-muted mt-4 text-pretty text-sm leading-relaxed">
                “{t.quote}”
              </blockquote>
              <figcaption class="mt-5 text-sm">
                <span class="text-strong font-semibold">{t.name}</span>
                <span class="text-subtle"> · {t.location}</span>
              </figcaption>
            </div>
          </figure>
        ))
      }
    </div>
  </div>

  {
    showWave ? (
      <div class="relative -mb-px mt-12">
        <WaveDivider tone={safeWaveTone} class="absolute bottom-0 left-0 right-0" />
      </div>
    ) : null
  }
</section>
