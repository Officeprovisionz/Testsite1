---
import { siteConfig } from '@/data/siteConfig';
import WaveDivider from '@/components/WaveDivider.astro';

type Tile = {
  title: string;
  description: string;
  href: string;
  image: string;
  cta: string;
};

const base = import.meta.env.BASE_URL;
const href = (path: string) => `${base}${path.replace(/^\/+/, '')}`;

const tiles: Tile[] = [
  {
    title: 'Recurring janitorial',
    description:
      'Reliable visits with checklist-based scope—so cleaning stays consistent week after week.',
    href: href('services/'),
    image: href('gallery/02.svg'),
    cta: 'Learn more',
  },
  {
    title: 'Industries we serve',
    description:
      'Offices, property management, clinics, and customer spaces—scoped clearly for operations teams.',
    href: href('industries/'),
    image: href('gallery/04.svg'),
    cta: 'Learn more',
  },
  {
    title: 'Results & proof',
    description:
      'A look at recent work across commercial spaces, plus what a “standard visit” really includes.',
    href: href('results/'),
    image: href('gallery/01.svg'),
    cta: 'Learn more',
  },
];
---

<section class="section section-muted section-creative -mt-14 pt-20" aria-label="Overview">
  <div class="container-page relative">
    <div class="text-center">
      <p class="eyebrow">{siteConfig.brand.name}</p>
      <h2 class="heading-2 mt-3">Everything your workplace needs.</h2>
      <p class="lede mx-auto mt-4 max-w-2xl">
        Commercial-grade cleaning with supplies and facilities support—built to fit your schedule.
      </p>
    </div>

    <div aria-hidden="true" class="pointer-events-none absolute inset-x-0 -top-10 -z-10">
      <div class="bg-brand-400/18 mx-auto h-72 w-[min(72rem,95vw)] rounded-full blur-3xl"></div>
    </div>

    <div class="mt-10 grid gap-6 lg:grid-cols-12 lg:items-stretch">
      <a href={tiles[0]!.href} class="glass-card group relative overflow-hidden lg:col-span-7">
        <div class="grid gap-6 p-7 sm:p-9 lg:grid-cols-[1.1fr_0.9fr] lg:items-center">
          <div>
            <p class="eyebrow">Featured</p>
            <h3 class="text-strong mt-2 text-2xl font-semibold tracking-tight">
              {tiles[0]!.title}
            </h3>
            <p class="text-muted mt-3 max-w-prose leading-relaxed">{tiles[0]!.description}</p>
            <div class="mt-6 inline-flex items-center gap-2 text-sm font-medium text-brand-700">
              <span class="group-hover:underline">{tiles[0]!.cta}</span>
              <span aria-hidden="true">→</span>
            </div>
          </div>

          <div class="border-app relative aspect-[4/3] overflow-hidden rounded-2xl border">
            <img
              src={tiles[0]!.image}
              alt=""
              class="h-full w-full object-cover"
              loading="lazy"
              decoding="async"
            />
            <div
              aria-hidden="true"
              class="pointer-events-none absolute inset-0 bg-gradient-to-t from-slate-950/45 via-slate-950/10 to-transparent"
            >
            </div>
          </div>
        </div>
      </a>

      <div class="grid gap-6 lg:col-span-5">
        {
          [tiles[1]!, tiles[2]!].map((t, idx) => (
            <a
              href={t.href}
              class:list={[
                'glass border-app group overflow-hidden rounded-[var(--radius-card)] border p-6 transition-transform',
                idx === 0 ? 'lg:translate-y-6' : '',
              ]}
            >
              <div class="flex items-start justify-between gap-4">
                <div class="min-w-0">
                  <h3 class="text-strong text-lg font-semibold tracking-tight">{t.title}</h3>
                  <p class="text-muted mt-2 text-sm leading-relaxed">{t.description}</p>
                </div>
                <div class="hidden flex-none sm:block">
                  <div class="border-app relative h-14 w-20 overflow-hidden rounded-xl border">
                    <img
                      src={t.image}
                      alt=""
                      class="h-full w-full object-cover"
                      loading="lazy"
                      decoding="async"
                    />
                  </div>
                </div>
              </div>

              <div class="mt-5 inline-flex items-center gap-2 text-sm font-medium text-brand-700">
                <span class="group-hover:underline">{t.cta}</span>
                <span aria-hidden="true">→</span>
              </div>
            </a>
          ))
        }
      </div>
    </div>
  </div>

  <div class="relative -mb-px mt-12">
    <WaveDivider tone="bg" class="absolute bottom-0 left-0 right-0" />
  </div>
</section>
