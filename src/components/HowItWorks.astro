---
import { siteConfig } from '@/data/siteConfig';
import WaveDivider from '@/components/WaveDivider.astro';

const {
  id,
  heading = 'How it works',
  description = 'A simple, repeatable process that keeps service consistent across visits.',
  showWave = true,
  waveTone = 'bg',
} = Astro.props;

const safeWaveTone =
  waveTone === 'surface' || waveTone === 'surface-muted' || waveTone === 'bg' ? waveTone : 'bg';
---

<section id={id} class="section section-muted section-creative scroll-mt-20 pb-0">
  <div class="container-page relative">
    <div class="section-head">
      <div>
        <h2 class="heading-2">{heading}</h2>
        <p class="lede">{description}</p>
      </div>
    </div>

    <ol class="mt-10 grid gap-6 lg:grid-cols-4">
      {
        siteConfig.processSteps.map((s, idx) => (
          <li class="glass-panel relative overflow-hidden p-6">
            <div
              aria-hidden="true"
              class="from-brand-200/14 pointer-events-none absolute inset-0 bg-gradient-to-br via-transparent to-brand-300/10"
            />
            <div class="relative">
              <div class="flex items-center gap-3">
                <span
                  class="grid h-10 w-10 place-items-center rounded-2xl bg-brand-900 text-sm font-semibold text-white shadow-md shadow-brand-900/15"
                  aria-hidden="true"
                >
                  {idx + 1}
                </span>
                <p class="text-strong text-sm font-semibold">{s.title}</p>
              </div>
              <p class="text-muted mt-3 text-sm leading-relaxed">{s.description}</p>
            </div>
          </li>
        ))
      }
    </ol>

    <div class="glass-card mt-10 overflow-hidden">
      <div class="grid gap-6 md:grid-cols-2 md:items-center">
        <div>
          <p class="eyebrow">Quality assurance</p>
          <p class="text-strong mt-2 text-lg font-bold">Checklist-based scope. Fast fixes.</p>
          <p class="text-muted mt-2 text-sm leading-relaxed">
            We keep scope clear and consistent with checklists—so you can delegate cleaning without
            babysitting it.
          </p>
        </div>
        <ul class="check-list check-list--compact text-muted text-sm">
          <li>
            <span class="check-icon check-icon--sm" aria-hidden="true">✓</span>
            <span>Clear inclusions + add-ons (no surprises)</span>
          </li>
          <li>
            <span class="check-icon check-icon--sm" aria-hidden="true">✓</span>
            <span>Single point of contact for requests</span>
          </li>
          <li>
            <span class="check-icon check-icon--sm" aria-hidden="true">✓</span>
            <span>Walkthrough notes + quick follow-up</span>
          </li>
        </ul>
      </div>
    </div>
  </div>

  {
    showWave ? (
      <div class="relative -mb-px mt-12">
        <WaveDivider tone={safeWaveTone} class="absolute bottom-0 left-0 right-0" />
      </div>
    ) : null
  }
</section>
