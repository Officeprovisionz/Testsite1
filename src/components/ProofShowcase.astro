---
import SectionHeader from '@/components/ui/SectionHeader.astro';

type ProofItem = {
  title: string;
  label?: string;
  description: string;
  bullets: string[];
  imageSrc: string;
  imageAlt: string;
};

type Props = {
  id?: string;
  heading?: string;
  description?: string;
  items?: ProofItem[];
};

const {
  id,
  heading = 'What “clean” looks like in the real world',
  description = 'A few examples of the spaces we support—built around clear scope, consistent checklists, and communication-first service.',
  items,
} = Astro.props as Props;

const base = import.meta.env.BASE_URL;
const href = (path: string) => `${base}${path.replace(/^\/+/, '')}`;

const defaults: ProofItem[] = [
  {
    label: 'Office suites',
    title: 'Client-ready common areas',
    description: 'Entryways, conference rooms, and shared spaces kept consistently presentable.',
    bullets: ['High-touch focus', 'Trash + floors', 'Restrooms serviced'],
    imageSrc: href('gallery/02.svg'),
    imageAlt: 'Example of an office common area',
  },
  {
    label: 'Restrooms',
    title: 'Details that get noticed',
    description: 'A repeatable checklist to avoid missed items and reduce complaints.',
    bullets: ['Sanitizing + restock', 'Spot-checks', 'Follow-up items tracked'],
    imageSrc: href('gallery/04.svg'),
    imageAlt: 'Example of a cleaned restroom or utility area',
  },
  {
    label: 'Breakrooms',
    title: 'Reset for the next shift',
    description: 'Wipe-downs, floors, and touchpoints handled the same way—every visit.',
    bullets: ['Counters + sink', 'Appliance exterior', 'Floor detailing as scoped'],
    imageSrc: href('gallery/06.svg'),
    imageAlt: 'Example of a breakroom or kitchenette',
  },
];

const cards: ProofItem[] = Array.isArray(items) && items.length ? items : defaults;
---

<section id={id} class="section section-creative scroll-mt-20" aria-label="Proof of work">
  <div class="container-page">
    <SectionHeader eyebrow="Proof" heading={heading} description={description}>
      <a slot="actions" class="btn-secondary hidden sm:inline-flex" href={href('results/')}>
        View results
      </a>
      <a slot="actions" class="btn-primary hidden sm:inline-flex" href={href('contact/')}>
        Request a walkthrough
      </a>
    </SectionHeader>

    <div class="mt-10 grid gap-5 lg:grid-cols-3">
      {
        cards.map((c) => (
          <article class="glass-panel group relative overflow-hidden">
            <div
              aria-hidden="true"
              class="from-brand-200/16 pointer-events-none absolute inset-0 bg-gradient-to-br via-transparent to-brand-300/10 opacity-70 transition-opacity duration-300 group-hover:opacity-100"
            />

            <div class="relative">
              <div class="surface-muted relative aspect-[4/3] overflow-hidden">
                <img
                  src={c.imageSrc}
                  alt={c.imageAlt}
                  loading="lazy"
                  decoding="async"
                  class="gallery-hover-zoom h-full w-full object-cover opacity-95"
                />
                {c.label ? (
                  <span class="border-app surface text-strong absolute left-4 top-4 rounded-full border px-3 py-1 text-xs font-semibold shadow-sm">
                    {c.label}
                  </span>
                ) : null}
              </div>

              <div class="p-6">
                <h3 class="text-strong text-lg font-bold">{c.title}</h3>
                <p class="text-muted mt-2 text-sm leading-relaxed">{c.description}</p>

                <ul class="check-list check-list--compact text-subtle text-sm">
                  {c.bullets.map((b) => (
                    <li>
                      <span class="check-icon check-icon--sm" aria-hidden="true">
                        ✓
                      </span>
                      <span>{b}</span>
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          </article>
        ))
      }
    </div>

    <div class="mt-8 flex flex-col gap-3 sm:hidden">
      <a class="btn-primary" href={href('contact/')}>Request a walkthrough</a>
      <a class="btn-secondary" href={href('results/')}>View results</a>
    </div>
  </div>
</section>
