---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import { PageHeroPro } from '@/components/PageHeroPro';
import { IndustriesPro } from '@/components/IndustriesPro';
import HowItWorks from '@/components/HowItWorks.astro';
import { siteConfig } from '@/data/siteConfig';
import { makeHref } from '@/lib/nav';
import { getPublicResponsiveImage } from '@/lib/publicImages';

const title = `Industries | ${siteConfig.brand.name}`;
const description =
  'Commercial cleaning for offices, property management, and customer spaces—scoped clearly with checklist-based delivery.';
const href = makeHref(import.meta.env.BASE_URL);

const heroImage = getPublicResponsiveImage(
  'gallery/services/facilities-03.jpg',
  import.meta.env.BASE_URL,
  {
    sizes: '100vw',
  }
);

const heroImageMobile = getPublicResponsiveImage(
  'gallery/services/restocking-03.jpg',
  import.meta.env.BASE_URL,
  {
    sizes: '100vw',
  }
);

const makeHeroImage = (src: string, srcMobile: string, position = '50% 40%') => {
  const desktop = getPublicResponsiveImage(src, import.meta.env.BASE_URL, { sizes: '100vw' });
  const mobile = getPublicResponsiveImage(srcMobile, import.meta.env.BASE_URL, { sizes: '100vw' });
  return {
    src,
    srcSet: desktop.srcSet,
    sizes: desktop.sizes,
    srcMobile,
    srcSetMobile: mobile.srcSet,
    sizesMobile: mobile.sizes,
    position,
    alt: 'Professional commercial cleaning for workplaces',
  };
};

const heroImages = [
  makeHeroImage(
    'gallery/services/facilities-03.jpg',
    'gallery/services/restocking-03.jpg',
    '50% 40%'
  ),
  makeHeroImage(
    'gallery/services/janitorial-02.jpg',
    'gallery/services/janitorial-03.jpg',
    '50% 45%'
  ),
  makeHeroImage('gallery/services/detail-02.jpg', 'gallery/services/detail-03.jpg', '50% 45%'),
];
---

<BaseLayout title={title} description={description}>
  <Header slot="header" />

  <PageHeroPro
    client:load
    title="Industries we serve"
    description="Built for real workplaces. Clear scope, consistent checklists, and fast communication—so cleaning stays off your plate."
    imageSrc="gallery/services/facilities-03.jpg"
    imageSrcMobile="gallery/services/restocking-03.jpg"
    imageAlt="Facilities support service photo"
    imageSrcSet={heroImage.srcSet}
    imageSizes={heroImage.sizes}
    imageSrcSetMobile={heroImageMobile.srcSet}
    imageSizesMobile={heroImageMobile.sizes}
    imagePosition="50% 40%"
    images={heroImages}
    rotateIntervalMs={5000}
  />

  <IndustriesPro client:visible />

  <HowItWorks id="process" heading="A process built for operations" waveTone="surface-muted" />

  <section
    id="quote"
    class="section section-muted section-creative scroll-mt-20"
    aria-label="Request a quote"
  >
    <div class="container-page">
      <div class="glass-card relative overflow-hidden p-7 sm:p-10">
        <div
          aria-hidden="true"
          class="from-brand-200/18 to-brand-300/12 pointer-events-none absolute inset-0 bg-gradient-to-br via-transparent"
        >
        </div>
        <div class="relative grid gap-6 md:grid-cols-2 md:items-center">
          <div>
            <p class="eyebrow">Next step</p>
            <h2 class="heading-2 mt-2">Request a quote</h2>
            <p class="lede">
              Tell us your industry, services needed, and frequency. We’ll confirm scope and send a
              clear written quote.
            </p>
          </div>
          <div class="flex flex-col gap-3 md:justify-self-end">
            <a class="btn-secondary" href={href('checklist/')}>Preview checklist</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <Footer slot="footer" />
</BaseLayout>
