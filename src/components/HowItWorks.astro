---
import { siteConfig } from '@/data/siteConfig';
import WaveDivider from '@/components/WaveDivider.astro';
import SectionHeader from '@/components/ui/SectionHeader.astro';
import Eyebrow from './ui/Eyebrow.astro';

const {
  id,
  heading = 'How it works',
  description = 'A simple, repeatable process that keeps service consistent across visits.',
  showWave = true,
  waveTone = 'bg',
} = Astro.props;

const safeWaveTone =
  waveTone === 'surface' || waveTone === 'surface-muted' || waveTone === 'bg' ? waveTone : 'bg';
---

<section id={id} class="section section-muted section-creative scroll-mt-20 pb-0">
  <div class="container-page relative lg:max-w-6xl">
    <SectionHeader heading={heading} description={description} />

    <ol class="mt-10 grid gap-6 lg:mt-14 lg:grid-cols-4 lg:gap-8">
      {
        siteConfig.processSteps.map((s, idx) => (
          <li class="glass-panel relative overflow-hidden p-5 sm:p-6 lg:p-8">
            <div
              aria-hidden="true"
              class="from-brand-200/14 pointer-events-none absolute inset-0 bg-gradient-to-br via-transparent to-brand-300/10"
            />
            <div class="relative">
              <div class="flex items-center gap-3">
                <span
                  class="grid h-10 w-10 place-items-center rounded-2xl bg-brand-600 text-sm font-semibold text-white shadow-md shadow-brand-600/15 lg:h-12 lg:w-12 lg:text-base"
                  aria-hidden="true"
                >
                  {idx + 1}
                </span>
                <p class="text-strong text-sm font-semibold lg:text-base">{s.title}</p>
              </div>
              <p class="mt-3 text-sm leading-relaxed text-muted lg:text-base lg:leading-relaxed">
                {s.description}
              </p>
            </div>
          </li>
        ))
      }
    </ol>

    <div class="glass-card mt-10 overflow-hidden p-6 sm:p-8 lg:mt-14 lg:p-10">
      <div class="grid gap-6 md:grid-cols-2 md:items-center lg:gap-10">
        <div>
          <Eyebrow>Quality assurance</Eyebrow>
          <p class="text-strong mt-2 text-lg font-bold lg:text-xl">
            Checklist-based scope. Fast fixes.
          </p>
          <p class="mt-2 text-sm leading-relaxed text-muted lg:text-base">
            We keep scope clear and consistent with checklists—so you can delegate cleaning without
            babysitting it.
          </p>
        </div>
        <ul class="check-list check-list--compact text-sm text-muted lg:text-base">
          <li>
            <span class="check-icon check-icon--sm" aria-hidden="true">✓</span>
            <span>Clear inclusions + add-ons (no surprises)</span>
          </li>
          <li>
            <span class="check-icon check-icon--sm" aria-hidden="true">✓</span>
            <span>Single point of contact for requests</span>
          </li>
          <li>
            <span class="check-icon check-icon--sm" aria-hidden="true">✓</span>
            <span>Walkthrough notes + quick follow-up</span>
          </li>
        </ul>
      </div>
    </div>
  </div>

  {
    showWave ? (
      <div class="relative -mb-px mt-12">
        <WaveDivider tone={safeWaveTone} class="absolute bottom-0 left-0 right-0" />
      </div>
    ) : null
  }
</section>
