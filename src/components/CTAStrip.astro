---
import { siteConfig } from '@/data/siteConfig';
import { makeHref } from '@/lib/nav';
import { makeTelHref } from '@/lib/links';

type Props = {
  heading?: string;
  description?: string;
  ctaText?: string;
  ctaHref?: string;
  variant?: 'default' | 'accent';
};

const href = makeHref(import.meta.env.BASE_URL);

const {
  heading = 'Ready to get started?',
  description = "Request a quote and we'll confirm scope, then send clear pricing.",
  ctaText = 'Request a quote',
  ctaHref = href('contact/'),
  variant = 'default',
} = Astro.props;

const telHref = makeTelHref(siteConfig.contact.phoneE164);
---

<section
  class:list={[
    'py-16 lg:py-20',
    variant === 'accent'
      ? 'bg-gradient-to-r from-brand-600 to-brand-700 text-white'
      : 'bg-gradient-to-b from-brand-50/50 to-white dark:from-brand-950/30 dark:to-slate-900',
  ]}
>
  <div class="container-page">
    <div class="mx-auto max-w-3xl text-center">
      <h2
        class:list={[
          'text-2xl font-bold tracking-tight sm:text-3xl',
          variant === 'accent' ? 'text-white' : 'text-strong',
        ]}
      >
        {heading}
      </h2>
      <p
        class:list={[
          'mx-auto mt-4 max-w-xl text-base',
          variant === 'accent' ? 'text-white/80' : 'text-muted',
        ]}
      >
        {description}
      </p>

      <div class="mt-8 flex flex-col items-center justify-center gap-4 sm:flex-row">
        {
          variant === 'accent' ? (
            <>
              <a
                href={ctaHref}
                class="inline-flex h-12 w-full items-center justify-center gap-2 rounded-xl bg-white px-6 text-base font-medium text-brand-700 shadow-lg transition-all hover:bg-brand-50 hover:shadow-xl sm:w-auto sm:px-8"
              >
                {ctaText}
                <svg
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M17 8l4 4m0 0l-4 4m4-4H3"
                  />
                </svg>
              </a>
              <a
                href={telHref}
                class="inline-flex h-12 w-full items-center justify-center gap-2 rounded-xl border border-white/30 bg-white/10 px-6 text-base font-medium text-white backdrop-blur-sm transition-all hover:bg-white/20 sm:w-auto sm:px-8"
              >
                <svg
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                  />
                </svg>
                {siteConfig.contact.phoneDisplay}
              </a>
            </>
          ) : (
            <>
              <a
                href={ctaHref}
                class="btn-accent inline-flex h-12 w-full items-center justify-center gap-2 px-6 text-base sm:w-auto sm:px-8"
              >
                {ctaText}
                <svg
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M17 8l4 4m0 0l-4 4m4-4H3"
                  />
                </svg>
              </a>
              <a
                href={telHref}
                class="btn-secondary inline-flex h-12 w-full items-center justify-center gap-2 px-6 text-base sm:w-auto sm:px-8"
              >
                <svg
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                  />
                </svg>
                {siteConfig.contact.phoneDisplay}
              </a>
            </>
          )
        }
      </div>
    </div>
  </div>
</section>
